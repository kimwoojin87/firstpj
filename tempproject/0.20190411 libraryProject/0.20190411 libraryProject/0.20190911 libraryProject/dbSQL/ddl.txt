ALTER TABLE LENT
	DROP
		CONSTRAINT FK_BOOK_TO_LENT
		CASCADE;

ALTER TABLE LENT
	DROP
		CONSTRAINT FK_MEMBER_TO_LENT
		CASCADE;

ALTER TABLE RESERVATION
	DROP
		CONSTRAINT FK_BOOK_TO_RESERVATION
		CASCADE;

ALTER TABLE RESERVATION
	DROP
		CONSTRAINT FK_MEMBER_TO_RESERVATION
		CASCADE;

ALTER TABLE RETURN
	DROP
		CONSTRAINT FK_BOOK_TO_RETURN
		CASCADE;

ALTER TABLE RETURN
	DROP
		CONSTRAINT FK_MEMBER_TO_RETURN
		CASCADE;

ALTER TABLE EXTENTION
	DROP
		CONSTRAINT FK_MEMBER_TO_EXTENTION
		CASCADE;

ALTER TABLE EXTENTION
	DROP
		CONSTRAINT FK_BOOK_TO_EXTENTION
		CASCADE;

ALTER TABLE BOOK_DETAL
	DROP
		CONSTRAINT FK_BOOK_TO_BOOK_DETAL
		CASCADE;

ALTER TABLE MEMBER
	DROP
		UNIQUE (
		)
		CASCADE
		KEEP INDEX;

ALTER TABLE MANAGER
	DROP
		UNIQUE (
			id
		)
		CASCADE
		KEEP INDEX;

ALTER TABLE MEMBER_DETAIL
	DROP
		UNIQUE (
		)
		CASCADE
		KEEP INDEX;

ALTER TABLE LENT
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE MEMBER
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE BOOK
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE RESERVATION
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE RETURN
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE MANAGER
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

DROP INDEX UIX_MEMBER;

DROP INDEX UIX_MANAGER;

DROP INDEX UIX_MEMBER_DETAIL;

DROP INDEX PK_LENT;

DROP INDEX PK_MEMBER;

DROP INDEX PK_BOOK;

DROP INDEX PK_RESERVATION;

DROP INDEX PK_RETURN;

DROP INDEX PK_MANAGER;

/* 대여 */
DROP TABLE LENT 
	CASCADE CONSTRAINTS;

/* 회원 */
DROP TABLE MEMBER 
	CASCADE CONSTRAINTS;

/* 도서 */
DROP TABLE BOOK 
	CASCADE CONSTRAINTS;

/* 예약  */
DROP TABLE RESERVATION 
	CASCADE CONSTRAINTS;

/* 반납 */
DROP TABLE RETURN 
	CASCADE CONSTRAINTS;

/* 관리자 */
DROP TABLE MANAGER 
	CASCADE CONSTRAINTS;

/* 회원상세정보 */
DROP TABLE MEMBER_DETAIL 
	CASCADE CONSTRAINTS;

/* 대여 연장 */
DROP TABLE EXTENTION 
	CASCADE CONSTRAINTS;

/* 도서상세정보 */
DROP TABLE BOOK_DETAL 
	CASCADE CONSTRAINTS;

/* 대여 */
CREATE TABLE LENT (
	lent_id INTEGER NOT NULL, /* 대여번호 */
	isbn VARCHAR2(32) NOT NULL, /* 도서번호 */
	member_id VARCHAR2(32) NOT NULL, /* 회원번호 */
	extension_count INTEGER, /* 연장횟수 */
	lent_date DATE NOT NULL, /* 대여날짜 */
	extension_date DATE /* 연장기간 */
);

COMMENT ON TABLE LENT IS '대여';

COMMENT ON COLUMN LENT.lent_id IS '대여번호';

COMMENT ON COLUMN LENT.isbn IS '도서번호';

COMMENT ON COLUMN LENT.member_id IS '회원번호';

COMMENT ON COLUMN LENT.extension_count IS '연장횟수';

COMMENT ON COLUMN LENT.lent_date IS '대여날짜';

COMMENT ON COLUMN LENT.extension_date IS '연장기간';

CREATE UNIQUE INDEX PK_LENT
	ON LENT (
		lent_id ASC
	);

ALTER TABLE LENT
	ADD
		CONSTRAINT PK_LENT
		PRIMARY KEY (
			lent_id
		);

/* 회원 */
CREATE TABLE MEMBER (
	member_id VARCHAR2(32) NOT NULL, /* 회원번호 */
	gender VARCHAR2(8) NOT NULL, /* 성별 */
	name VARCHAR2(32), /* 회원명 */
	phone_number VARCHAR2(32), /* 핸드폰번호 */
	address VARCHAR2(100), /* 주소 */
	image VARCHAR2(32), /* 이미지 */
	birthday DATE NOT NULL /* 생년월일 */
);

COMMENT ON TABLE MEMBER IS '회원';

COMMENT ON COLUMN MEMBER.member_id IS '회원번호';

COMMENT ON COLUMN MEMBER.gender IS '성별';

COMMENT ON COLUMN MEMBER.name IS '회원명';

COMMENT ON COLUMN MEMBER.phone_number IS '핸드폰번호';

COMMENT ON COLUMN MEMBER.address IS '주소';

COMMENT ON COLUMN MEMBER.image IS '이미지';

COMMENT ON COLUMN MEMBER.birthday IS '생년월일';

CREATE UNIQUE INDEX PK_MEMBER
	ON MEMBER (
		member_id ASC
	);

CREATE UNIQUE INDEX UIX_MEMBER
	ON MEMBER (
	);

ALTER TABLE MEMBER
	ADD
		CONSTRAINT PK_MEMBER
		PRIMARY KEY (
			member_id
		);

ALTER TABLE MEMBER
	ADD
		CONSTRAINT UK_MEMBER
		UNIQUE (
		);

/* 도서 */
CREATE TABLE BOOK (
	isbn VARCHAR2(32) NOT NULL, /* 도서번호 */
	name VARCHAR2(32) NOT NULL, /* 도서명 */
	writer VARCHAR2(32), /* 저자 */
	image_path VARCHAR2(100), /* 도서이미지 */
	genre VARCHAR2(32), /* 장르 */
	publisher VARCHAR2(32), /* 출판사 */
	position VARCHAR2(32) NOT NULL, /* 청구기호 */
	publish_date DATE /* 출간일 */
);

COMMENT ON TABLE BOOK IS '도서';

COMMENT ON COLUMN BOOK.isbn IS '도서번호';

COMMENT ON COLUMN BOOK.name IS '도서명';

COMMENT ON COLUMN BOOK.writer IS '저자';

COMMENT ON COLUMN BOOK.image_path IS '도서이미지';

COMMENT ON COLUMN BOOK.genre IS '장르';

COMMENT ON COLUMN BOOK.publisher IS '출판사';

COMMENT ON COLUMN BOOK.position IS '청구기호';

COMMENT ON COLUMN BOOK.publish_date IS '출간일';

CREATE UNIQUE INDEX PK_BOOK
	ON BOOK (
		isbn ASC
	);

ALTER TABLE BOOK
	ADD
		CONSTRAINT PK_BOOK
		PRIMARY KEY (
			isbn
		);

/* 예약  */
CREATE TABLE RESERVATION (
	reservation_id VARCHAR2(20) NOT NULL, /* 예약번호 */
	isbn VARCHAR2(32), /* 도서번호 */
	member_id VARCHAR2(32), /* 예약회원 */
	reserve_date DATE /* 예약날짜 */
);

COMMENT ON TABLE RESERVATION IS '예약 ';

COMMENT ON COLUMN RESERVATION.reservation_id IS '예약번호';

COMMENT ON COLUMN RESERVATION.isbn IS '도서번호';

COMMENT ON COLUMN RESERVATION.member_id IS '예약회원';

COMMENT ON COLUMN RESERVATION.reserve_date IS '예약날짜';

CREATE UNIQUE INDEX PK_RESERVATION
	ON RESERVATION (
		reservation_id ASC
	);

ALTER TABLE RESERVATION
	ADD
		CONSTRAINT PK_RESERVATION
		PRIMARY KEY (
			reservation_id
		);

/* 반납 */
CREATE TABLE RETURN (
	return_id INTEGER NOT NULL, /* 반납번호 */
	isbn VARCHAR2(32) NOT NULL, /* 도서번호 */
	member_id VARCHAR2(32) NOT NULL, /* 회원번호 */
	return_date DATE NOT NULL /* 반납날짜 */
);

COMMENT ON TABLE RETURN IS '반납';

COMMENT ON COLUMN RETURN.return_id IS '반납번호';

COMMENT ON COLUMN RETURN.isbn IS '도서번호';

COMMENT ON COLUMN RETURN.member_id IS '회원번호';

COMMENT ON COLUMN RETURN.return_date IS '반납날짜';

CREATE UNIQUE INDEX PK_RETURN
	ON RETURN (
		return_id ASC
	);

ALTER TABLE RETURN
	ADD
		CONSTRAINT PK_RETURN
		PRIMARY KEY (
			return_id
		);

/* 관리자 */
CREATE TABLE MANAGER (
	employee_id INTEGER NOT NULL, /* 사원번호 */
	name VARCHAR2(32), /* 사원이름 */
	id VARCHAR2(32) NOT NULL, /* 사원아이디 */
	password VARCHAR2(32) NOT NULL /* 사원비밀번호 */
);

COMMENT ON TABLE MANAGER IS '관리자';

COMMENT ON COLUMN MANAGER.employee_id IS '사원번호';

COMMENT ON COLUMN MANAGER.name IS '사원이름';

COMMENT ON COLUMN MANAGER.id IS '사원아이디';

COMMENT ON COLUMN MANAGER.password IS '사원비밀번호';

CREATE UNIQUE INDEX PK_MANAGER
	ON MANAGER (
		employee_id ASC
	);

CREATE UNIQUE INDEX UIX_MANAGER
	ON MANAGER (
		id ASC
	);

ALTER TABLE MANAGER
	ADD
		CONSTRAINT PK_MANAGER
		PRIMARY KEY (
			employee_id
		);

ALTER TABLE MANAGER
	ADD
		CONSTRAINT UK_MANAGER
		UNIQUE (
			id
		);

/* 회원상세정보 */
CREATE TABLE MEMBER_DETAIL (
);

COMMENT ON TABLE MEMBER_DETAIL IS '회원상세정보';

CREATE UNIQUE INDEX UIX_MEMBER_DETAIL
	ON MEMBER_DETAIL (
	);

ALTER TABLE MEMBER_DETAIL
	ADD
		CONSTRAINT UK_MEMBER_DETAIL
		UNIQUE (
		);

/* 대여 연장 */
CREATE TABLE EXTENTION (
	member_id VARCHAR2(32), /* 회원번호 */
	isbn VARCHAR2(32), /* 도서번호 */
	first_lent DATE, /* 반납날짜 */
	hight_extention DATE, /* 연장기간 */
	final_lent <지정 되지 않음> /* 최종반납날짜 */
);

COMMENT ON TABLE EXTENTION IS '대여 연장';

COMMENT ON COLUMN EXTENTION.member_id IS '회원번호';

COMMENT ON COLUMN EXTENTION.isbn IS '도서번호';

COMMENT ON COLUMN EXTENTION.first_lent IS '반납날짜';

COMMENT ON COLUMN EXTENTION.hight_extention IS '연장기간';

COMMENT ON COLUMN EXTENTION.final_lent IS '최종반납날짜';

/* 도서상세정보 */
CREATE TABLE BOOK_DETAL (
	isbn VARCHAR2(32) /* 도서번호 */
);

COMMENT ON TABLE BOOK_DETAL IS '도서상세정보';

COMMENT ON COLUMN BOOK_DETAL.isbn IS '도서번호';

ALTER TABLE LENT
	ADD
		CONSTRAINT FK_BOOK_TO_LENT
		FOREIGN KEY (
			isbn
		)
		REFERENCES BOOK (
			isbn
		);

ALTER TABLE LENT
	ADD
		CONSTRAINT FK_MEMBER_TO_LENT
		FOREIGN KEY (
			member_id
		)
		REFERENCES MEMBER (
			member_id
		);

ALTER TABLE RESERVATION
	ADD
		CONSTRAINT FK_BOOK_TO_RESERVATION
		FOREIGN KEY (
			isbn
		)
		REFERENCES BOOK (
			isbn
		);

ALTER TABLE RESERVATION
	ADD
		CONSTRAINT FK_MEMBER_TO_RESERVATION
		FOREIGN KEY (
			member_id
		)
		REFERENCES MEMBER (
			member_id
		);

ALTER TABLE RETURN
	ADD
		CONSTRAINT FK_BOOK_TO_RETURN
		FOREIGN KEY (
			isbn
		)
		REFERENCES BOOK (
			isbn
		);

ALTER TABLE RETURN
	ADD
		CONSTRAINT FK_MEMBER_TO_RETURN
		FOREIGN KEY (
			member_id
		)
		REFERENCES MEMBER (
			member_id
		);

ALTER TABLE EXTENTION
	ADD
		CONSTRAINT FK_MEMBER_TO_EXTENTION
		FOREIGN KEY (
			member_id
		)
		REFERENCES MEMBER (
			member_id
		);

ALTER TABLE EXTENTION
	ADD
		CONSTRAINT FK_BOOK_TO_EXTENTION
		FOREIGN KEY (
			isbn
		)
		REFERENCES BOOK (
			isbn
		);

ALTER TABLE BOOK_DETAL
	ADD
		CONSTRAINT FK_BOOK_TO_BOOK_DETAL
		FOREIGN KEY (
			isbn
		)
		REFERENCES BOOK (
			isbn
		);